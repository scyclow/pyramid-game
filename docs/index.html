

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Pyramid Game</title>
  <link rel="shortcut icon" type="image/x-icon" href="./logo.svg" id="favicon">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta name="description" content="">
  <meta name="keywords" content="pyramid game, pyramid, game, steviep, steve pikelny, pikelny, crypto, ethereum, eth, bitcoin, scam, pyramid scheme, scheme">

  <meta name="twitter:image" content="h">
  <meta name="twitter:image:alt" content="">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:creator" content="@steviepxyz">
  <meta name="twitter:site" content="@steviepxyz">
  <meta property="twitter:description" content="">

  <meta name="og:image" property="og:image" content="">
  <meta name="og:image:alt" content="">
  <meta property="og:type" content="website">
  <meta property="og:url" content="">
  <meta property="og:title" content="">
  <meta property="og:site_name" content="">
  <meta property="og:description" content="">


  <link rel="stylesheet" type="text/css" href="./styles.css">

  <style type="text/css">

    h1 {
      font-size: min(5em, 13vw);
      font-weight: 500;
    }

    h1, h2, h3 {
      text-align: center;
    }

    .slowBlink {
      animation: Blink 3s steps(2, start) infinite;
    }

    #logo {
      width: 500px;
      max-width: 81vw;
    }

    button {
      background: var(--gray-color);
      color: var(--font-color);
      border: 0.15em solid var(--font-color);
      padding: 0.5em 1em;
      font-size: 2em;
      font-weight: 500;
      letter-spacing: 0.1em;
    }

    button:hover {
      color: var(--font-color);
      background: var(--accent-color);
      border-color: var(--accent-color);
    }

    button:active {
      color: var(--font-color);
      border-color: var(--font-color);
      background: var(--bg-color);
    }

    .connectButton:hover {
      border-color: var(--font-color);
    }

    .center-v {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }

    .center {
      display: flex;
      justify-content: center;
    }

    table {
      border: 2px solid;
      border-spacing: 0;
    }

    td {
      border: 1px solid;
      padding: 0.5em;
    }

    section {
      margin: 2.5em auto;
      padding: 0 0.75em;
    }

    input {
      border: 3px solid var(--font-color);
      text-align: center;
      padding: 0.25em 0;
      font-size: 1.25em;
      background: var(--input-color);
    }

    input:active, input:focus, input:hover {
      outline: none;
      border-color: var(--accent-color);
    }

    input + .small-button {
      border-left: 0;
    }

    .small-button {
      font-size: 1.25em;
    }

    .tiny-button {
      font-size: 1em;
      margin-top: 0.25em;
    }
    .tiny-input {
      font-size: 1em;
      padding: 0.25em;
    }

    sup a {
      display: inline-block;
      border: 1px solid;
      text-decoration: none;
      color: var(--accent-color);
      padding: 0 0.25em;
      transform: translateY(-0.25em);
      margin-left: 0.25em;
      font-size: 0.75em;
    }

    sup a:hover {
      background: var(--accent-color);
      color: var(--font-color);
      border-color: var(--accent-color);

      text-decoration: none;
    }

    a {
      text-decoration: none;
      color: var(--font-color);
    }

    a:hover {
      text-decoration: underline;
    }

    .scanlink {
      border-bottom: 0.1em solid rgba(0, 0, 0, 0);
      font-size: 1.75em;
    }

    .scanlink:hover {
      text-decoration: none;
      border-bottom: 0.1em solid;
    }


    .largeText {
      font-size: 6em;
    }
    @media (max-width:  640px) {
      .scanlink {
        font-size: 1.25em;
      }

    }

    @media (max-width:  550px) {
      .largeText {
        font-size: 3em;
      }

    }

    @media (max-width: 450px) {
      .scanlink {
        font-size: 0.9em;
      }

      #leaderboard {
        font-size: 0.7em;
      }
    }


  </style>


  <script src="./utils.js"></script>
  <!-- <script type="module" src="./modal.js"></script> -->
  <script type="module" src="./connectWallet.js"></script>




</head>
<body>
  <div class="center-v" style="height: 80vh;">

    <svg id="logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 487 487" fill="none">
      <path d="M465.001 435.5H244.995H20.5L242.75 50L465.001 435.5Z"  stroke-width="14"/>
      <path d="M205.5 348C216 357 227.513 359.224 243.001 359.999C293 362.5 301.001 294.999 243.001 293.499C185.001 291.999 196.5 224.5 243.001 229.998C243.001 229.998 259.5 229.998 276.5 244"  stroke-width="14" stroke-linecap="square"/>
      <line x1="242.5" y1="201" x2="242.5" y2="386"  stroke-width="14"/>
    </svg>

    <h1>Pyramid Game</h1>
  </div>



  <connect-wallet>
    <div slot="connected">

      <section class="center-v">
        <div class="center">
          <input placeholder="0.01 Ξ" type="number" style="width:10.1em">  <button class="small-button">Send</button>
        </div>
      </section>

    </div>

    <div slot="notConnected">
      <div class="center" style="margin-top: 1em">
        <connect-button>
          <button class="connectButton" slot="button">CONNECT</button>
        </connect-button>
      </div>
    </div>
  </connect-wallet>




  </section>


  <section>
    <connect-wallet>
      <div slot="notConnected">
        <h1 class="slowBlink largeText" style="margin-bottom: 0.25em">$</h1>
      </div>
    </connect-wallet>

    <svg xmlns="http://www.w3.org/2000/svg" width="100%"  viewBox="0 0 1095 225" fill="none">
      <path d="M547 225L590.301 150L503.699 150L547 225ZM539.5 3.27835e-07L539.5 157.5L554.5 157.5L554.5 -3.27835e-07L539.5 3.27835e-07Z" fill="var(--font-color)"/>
    </svg>


    <h2 style="display: flex; align-items: center; justify-content: center; margin: 1em 0">
      <a class="scanlink">
        pyramidgame.base.eth<svg xmlns="http://www.w3.org/2000/svg" width="0.6em" viewBox="0 0 156 184" fill="none" style="margin-left: 0.25em; margin-top: 0em;">
          <rect x="6" y="6" width="144" height="172" stroke-width="23"/>
          <path d="M32 52H124" stroke-width="15"/>
          <path d="M32 92H124" stroke-width="15"/>
          <path d="M32 131H124" stroke-width="15"/>
        </svg>
      </a>
    </h2>


    <svg xmlns="http://www.w3.org/2000/svg" width="100%" viewBox="0 0 1168 702" fill="none">
      <path d="M284 627L327.301 552L240.699 552L284 627ZM276.5 179L276.5 559.5L291.5 559.5L291.5 179L276.5 179Z" fill="var(--font-color)"/>
      <path d="M404 590L447.301 515L360.699 515L404 590ZM396.5 179L396.5 522.5L411.5 522.5L411.5 179L396.5 179Z" fill="var(--font-color)"/>
      <path d="M525 553L568.301 478L481.699 478L525 553ZM517.5 179L517.5 485.5L532.5 485.5L532.5 179L517.5 179Z" fill="var(--font-color)"/>
      <path d="M164 665L207.301 590L120.699 590L164 665ZM156.5 179L156.5 597.5L171.5 597.5L171.5 179L156.5 179Z" fill="var(--font-color)"/>
      <path d="M44 702L87.3013 627H0.69873L44 702ZM36.5 179L36.5 634.5H51.5L51.5 179H36.5Z" fill="var(--font-color)"/>
      <path d="M885 441L928.301 366L841.699 366L885 441ZM877.5 179L877.5 373.5L892.5 373.5L892.5 179L877.5 179Z" fill="var(--font-color)"/>
      <path d="M1004 403L1047.3 328L960.699 328L1004 403ZM996.5 179L996.5 335.5L1011.5 335.5L1011.5 179L996.5 179Z" fill="var(--font-color)"/>
      <path d="M1124 366L1167.3 291L1080.7 291L1124 366ZM1116.5 179L1116.5 298.5L1131.5 298.5L1131.5 179L1116.5 179Z" fill="var(--font-color)"/>
      <path d="M764 478L807.301 403L720.699 403L764 478ZM756.5 179L756.5 410.5L771.5 410.5L771.5 179L756.5 179Z" fill="var(--font-color)"/>
      <path d="M645 515L688.301 440L601.699 440L645 515ZM637.5 179L637.5 447.5L652.5 447.5L652.5 179L637.5 179Z" fill="var(--font-color)"/>
      <line x1="36.5" y1="181.5" x2="1131.5" y2="181.5"  stroke-width="15"/>
      <line x1="583.5" y1="-3.27835e-07" x2="583.5" y2="189"  stroke-width="15"/>
    </svg>

    <div class="center-v">
      <h2 style="font-size: 2.675em; margin-bottom: 0.25em;">Leaders <sup style="margin-left: -1em; font-size: 0.5em;"><a href="#faq">?</a></sup></h2>

      <connect-wallet>
        <div slot="connected">
          <table id="leaderboard" style="margin: auto;"></table>
        </div>

        <div slot="notConnected">
          <div class="center" style="margin-top: 1em; border: 3px solid; padding: 1.5em">
            <connect-button>
              <button class="connectButton" slot="button" style="font-size: 1.5em">Connect to view<br> Leaders</button>
              <div slot="loading" class="slowBlink" style="font-size: 1.5em">Connecting...</div>
            </connect-button>
          </div>
        </div>
      </connect-wallet>
    </div>
  </section>

  <section>
    <div style="margin: 1em">
      <svg xmlns="http://www.w3.org/2000/svg" width="100%"  viewBox="0 0 1095 225" fill="none">
        <path d="M547 225L590.301 150L503.699 150L547 225ZM539.5 3.27835e-07L539.5 157.5L554.5 157.5L554.5 -3.27835e-07L539.5 3.27835e-07Z" fill="var(--font-color)"/>
      </svg>
    </div>

    <h1 class="slowBlink">$</h1>
  </section>

  <section>
    <div class="center-v">
      <connect-wallet>
        <div slot="connected">
          <div id="yourContributions" style="margin-top: 0em; border: 1.35em double; padding: 0.5em;"></div>
        </div>
      </connect-wallet>
    </div>
  </section>


  <section class="center-v">
  </section>


  <section class="center-v" id="faq">
    <h2>???</h2>
    <p>All ETH sent to the Pyramid Game is split between the Leaders.</p>
    <p>Leaders are determined by </p>
  </section>

  <section>
    <h2 style="border: 2px dashed; margin-bottom: 0.5em;">Advanced</h2>
    <h3>Forward<sup><a href="#forward">?</a></sup></h3>
    <div class="center-v">
      <input class="tiny-input" placeholder="0x0000000000000000000000000000000000000000" style="width: 27em; max-width: 90vw;">  <button class="tiny-button">Submit</button>
    </div>
  </section>

  <section>
    <h3>Consolidate<sup><a href="#consolidate">?</a></sup></h3>
    <div class="center-v">
      <input class="tiny-input" placeholder="0x0000000000000000000000000000000000000000" style="width: 27em; max-width: 90vw;">
      <input class="tiny-input" placeholder="0.01 Ξ" style="margin-top: 0.25em;">
      <button class="tiny-button">Submit</button>
    </div>
  </section>

  <section>
    <h3>Delegate</h3>
    <div class="center-v">
      <input class="tiny-input" placeholder="0x0000000000000000000000000000000000000000" style="width: 27em; max-width: 90vw;">  <button class="tiny-button">Submit</button>
    </div>
  </section>


  <section>


    <style type="text/css">
      .block {
        padding: 2em;
      }
    </style>


    <div class="block" style="background: var(--black-color); color: var(--red-color);">
      dsfasdfsadfasdfdasd
    </div>
    <div class="block" style="background: var(--gray-color); color: var(--green-color);">
      dsfasdfsadfasdfdasd
    </div>
    <div class="block" style="background: var(--white-color); color: var(--red-color);">
      dsfasdfsadfasdfdasd
    </div>
    <div class="block" style="background: var(--green-color); color: var(--black-color);">
      dsfasdfsadfasdfdasd
    </div>
    <div class="block" style="background: var(--cyan-color); color: var(--black-color);">
      dsfasdfsadfasdfdasd
    </div>
    <div class="block" style="background: var(--blue-color); color: var(--black-color);">
      dsfasdfsadfasdfdasd
    </div>
    <div class="block" style="background: var(--magenta-color); color: var(--black-color);">
      dsfasdfsadfasdfdasd
    </div>

    <div class="block" style="background: var(--red-color); color: var(--black-color);">
      dsfasdfsadfasdfdasd
    </div>


    <div class="block" style="background: var(--orange-color); color: var(--black-color);">
      dsfasdfsadfasdfdasd
    </div>

    <div class="block" style="background: var(--yellow-color); color: var(--black-color);">
      dsfasdfsadfasdfdasd
    </div>


  </section>



  <footer style="margin: 4em auto;"><a href="https://steviep.xyz" target="_blank" style="text-decoration: underline;">steviep.xyz</a> 2025</footer>

    <div id="pyramids"></div>

</body>



<script type="module">
  import {provider, etherscanAddr, addEtherscanLinks, ethVal} from './eth.js'
  import {CONTRACTS} from './contracts.js'
  import {$} from './$.js'


  provider.setContractInfo(CONTRACTS)

  addEtherscanLinks('scanlink', 'PyramidGame', 'base')

  provider.onConnect(async (addr) => {
    const { PyramidGame } = await provider.getContracts('PyramidGame')
    const { name: chainName, etherscanLink } = await provider.getNetwork()

    const leaders = await Promise.all(times(10, i =>
      PyramidGame.leaders(i).then(addr => {
        const prettyAddr = provider.formatAddr(addr)
        const c = PyramidGame.contributions(addr).then(ethVal)

        return Promise.all([
          addr, prettyAddr, c
        ])
      })
    ))

    const isLeader = await PyramidGame.isLeader(addr)

    const yourContributions = ethVal(await PyramidGame.contributions(addr))
    const yourDistributions = (await provider.contractEvents(PyramidGame, 'Distribution', [addr, null]))
      .map(d => ({
        recipient: d.recipient,
        amount: ethVal(d.amount)
      }))
    const totalReceived = yourDistributions.reduce((a, c) => a + c.amount, 0)


    const sortedLeaders = leaders.sort((a, b) => b[2] - a[2])
    const lowestAmount = leaders.at(-1)[2]
    const totalLeaderSum = leaders.reduce((a, c) => a + c[2], 0)
    sortedLeaders.forEach(l => l.push(l[2] / totalLeaderSum))

    const highliteStyle = 'color: var(--bg-color)'

    $.id('leaderboard').innerHTML = sortedLeaders.map((l, i) => `
      <tr ${l[0] === addr ? 'style="background: var(--font-color); color: var(--bg-color)"' : ''}>
        <td>${i+1}.</td>
        <td>${etherscanAddr(
          etherscanLink,
          l[0],
          l[1],
          'padding: 0.5em;' + (l[0] === addr ? highliteStyle : '')
        )}</td>
        <td style="display: flex; justify-content: space-between"><span style="margin-right: 0.25em">Ξ</span> <span>${l[2].toFixed(2)}</span></td>
        <td style="text-align: right">${(l[3] * 100).toFixed(2)}%</td>
      </tr>
    `).join('')


    $.id('yourContributions').innerHTML = yourContributions > 0
      ? `
        <h2><span style="width: 17ch; display: inline-block; text-align: left">You've sent:</span> <span><span style="margin-right: 0.25em">Ξ</span>${yourContributions.toFixed(2)}</span></h2>
        <h2><span style="width: 17ch; display: inline-block; text-align: left">You've received:</span> <span><span style="margin-right: 0.25em">Ξ</span>${totalReceived.toFixed(2)}</span></h2>
        ${!isLeader
          ? `<h2>Send <span style="margin-right: 0.25em">Ξ</span>${(lowestAmount - yourContributions).toFixed(4) || 0.0001} to receive <br>future distributions<h2>`
          : ''
        }
      `
      : `
        <div style="margin: 0.5em 0;">
          <div class="center">
            <input placeholder="0.01 Ξ" type="number" style="width:10.1em">  <button class="small-button">Send</button>
          </div>
          <p style="max-width: 300px; text-align: center; padding: 0 0.5em; margin: auto;">Send <span style="margin-right: 0.25em">Ξ</span>${lowestAmount.toFixed(4)} to receive future distributions</p>
        </div>
      `


    addEtherscanLinks('scanlink', 'PyramidGame', chainName)
  })



export const setColor = (c, v) => {
  const r = document.querySelector(':root')
  r.style.setProperty(c, v)
}

const colors = [
 'var(--green-color)',
 'var(--black-color)',
 'var(--blue-color)',
 'var(--red-color)',
]//.sort(() => Math.random() - 0.5)


setColor('--bg-color', colors[0])
setColor('--font-color', colors[1])
setColor('--accent-color', colors[2])


// pink/orange

const pyramid = (c1, c2) => {
  console.log(c1, c2)
  return `
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 487 487" fill="none" style="display: inline-block; width: 350px">
      <rect width="100%" height="100%" x="0" y="0" fill="${c2} !important" stroke-width="0"></rect>
      <path d="M465.001 435.5H244.995H20.5L242.75 50L465.001 435.5Z"  stroke-width="14" stroke="${c1} !important"/>
      <path d="M205.5 348C216 357 227.513 359.224 243.001 359.999C293 362.5 301.001 294.999 243.001 293.499C185.001 291.999 196.5 224.5 243.001 229.998C243.001 229.998 259.5 229.998 276.5 244"  stroke-width="14" stroke-linecap="square" stroke="${c1} !important"/>
      <line x1="242.5" y1="201" x2="242.5" y2="386"  stroke-width="14" stroke="${c1} !important"/>
    </svg>
`}



  $.render($.id('pyramids'), [
    pyramid(colors[1], colors[0]),
    pyramid(colors[2], colors[0]),
    pyramid(colors[3], colors[0]),
    pyramid(colors[2], colors[1]),
    pyramid(colors[3], colors[1]),
    pyramid(colors[0], colors[1]),
    pyramid(colors[3], colors[2]),
    pyramid(colors[0], colors[2]),
    pyramid(colors[1], colors[2]),
    pyramid(colors[0], colors[3]),
    pyramid(colors[1], colors[3]),
    pyramid(colors[2], colors[3]),
  ].join(''))




</script>
</html>